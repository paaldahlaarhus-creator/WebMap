"0","library(sf)"
"0","library(leaflet)"
"0","library(htmlwidgets)"
"0",""
"0","# Paths to geojson files"
"0","kommuner_path <- ""www/assets/kommuner.geojson"""
"0","fylker_path   <- ""www/assets/fylker.geojson"""
"0",""
"0","# Read data"
"0","fylker <- st_read(fylker_path, quiet = FALSE)"
"1","Multiple layers are present in data source "
"1","/Users/paal1205/Documents/DataScience/my_Oslofjord_site/www/assets/fylker.geojson"
"1",", "
"1","reading layer `"
"1","Fylke"
"1","'."
"1","
"
"1","Use `st_layers' to list all layer names and their type in a data source."
"1","
"
"1","Set the `layer' argument in `st_read' to read a particular layer."
"1","
"
"1","Reading layer `"
"1","Fylke"
"1","' from data source "
"1","
"
"1","  "
"1","`"
"1","/Users/paal1205/Documents/DataScience/my_Oslofjord_site/www/assets/fylker.geojson"
"1","' "
"1","
"
"1","  "
"1","using driver `"
"1","GeoJSON"
"1","'"
"1","
"
"1","Simple feature collection with 15 features and 14 fields"
"1","
"
"1","Geometry type: MULTIPOLYGON
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -99551.21 ymin: 6426048 xmax: 1121941 ymax: 7962744"
"1","
"
"1","Projected CRS: ETRS89 / UTM zone 33N
"
"0","kommuner <- st_read(kommuner_path, quiet = FALSE)"
"1","Reading layer `"
"1","Kommune"
"1","' from data source "
"1","
"
"1","  "
"1","`"
"1","/Users/paal1205/Documents/DataScience/my_Oslofjord_site/www/assets/kommuner.geojson"
"1","' "
"1","
"
"1","  "
"1","using driver `"
"1","GeoJSON"
"1","'"
"1","
"
"1","Simple feature collection with 357 features and 14 fields"
"1","
"
"1","Geometry type: MULTIPOLYGON
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: 4.087524 ymin: 57.759 xmax: 31.76159 ymax: 71.38488"
"1","
"
"1","Geodetic CRS:  ETRS89
"
"0","# Fix CRS"
"0","if (is.na(st_crs(fylker))) st_crs(fylker) <- 4258"
"0","if (is.na(st_crs(kommuner))) st_crs(kommuner) <- 4258"
"0","fylker <- st_transform(fylker, 4326)"
"0","kommuner <- st_transform(kommuner, 4326)"
"0",""
"0","# Find label columns"
"0","label_fylke <- names(fylker)[grep(""navn|name"", names(fylker), ignore.case = TRUE)][1]"
"0","label_kommune <- names(kommuner)[grep(""navn|name"", names(kommuner), ignore.case = TRUE)][1]"
"0",""
"0","# Fallback"
"0","if (is.na(label_fylke)) label_fylke <- names(fylker)[1]"
"0","if (is.na(label_kommune)) label_kommune <- names(kommuner)[1]"
"0",""
"0","leaflet() %>%"
"0","  addTiles() %>%"
"0","  addPolygons("
"0","    data = fylker,"
"0","    group = ""fylker"","
"0","    label = ~ get(label_fylke),"
"0","    color = ""red"","
"0","    weight = 1,"
"0","    fillOpacity = 0.2"
"0","  ) %>%"
"0","  addPolygons("
"0","    data = kommuner,"
"0","    group = ""kommuner"","
"0","    label = ~ get(label_kommune),"
"0","    color = ""blue"","
"0","    weight = 1,"
"0","    fillOpacity = 0.3"
"0","  ) %>%"
"0","  addLayersControl("
"0","    overlayGroups = c(""fylker"", ""kommuner""),"
"0","    options = layersControlOptions(collapsed = FALSE)"
"0","  )"
